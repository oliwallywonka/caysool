{"version":3,"sources":["webpack:///src/app/core/services/inventario.service.ts","webpack:///src/app/core/services/prestamo.service.ts"],"names":["InventarioService","http","inventario","response","baseUrl","clientCi","page","force","estadoInv","headers","set","sessionStorage","getItem","cacheResponse$","get","pipe","id","clientId","body","post","patch","providedIn","PrestamoService","prestamo","client","estadoPrestamo"],"mappings":"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","file":"common-es5.js","sourcesContent":["import { Injectable, Output ,EventEmitter} from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\n\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { environment } from '../../../environments/environment';\r\nimport { Inventario, InventarioResponse } from 'src/app/interfaces/inventario';\r\nimport { shareReplay } from 'rxjs/operators';\r\n\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class InventarioService {\r\n\r\n  @Output() inventario:EventEmitter<Inventario> = new EventEmitter();\r\n  @Output() response:EventEmitter<InventarioResponse> = new EventEmitter();\r\n  cacheResponse$: Observable<any>;\r\n  private baseUrl: string = environment.baseUrl;\r\n\r\n  constructor( private http: HttpClient ) { }\r\n\r\n  getInventario({\r\n    clientCi = '',\r\n    page = 1,\r\n    force = false,\r\n    estadoInv = ''\r\n  }):Observable<any>{\r\n    const headers = new HttpHeaders()\r\n      .set('x-access-token',sessionStorage.getItem('token')||'');\r\n    if (force || !this.cacheResponse$) {\r\n      return this.cacheResponse$ = this.http\r\n        .get(`${this.baseUrl}/inventario?ci=${clientCi}&estadoInv=${estadoInv}&page=${page}`,{headers})\r\n        .pipe( shareReplay(1));\r\n    }\r\n    return this.cacheResponse$;\r\n  }\r\n\r\n  getInventarioById(id: number):Observable<any>{\r\n    const headers = new HttpHeaders()\r\n      .set('x-access-token',sessionStorage.getItem('token')||'');\r\n    return this.cacheResponse$ = this.http.get(`${this.baseUrl}/inventario/${id}`,{headers});\r\n\r\n  }\r\n\r\n  getInventarioByClientId(clientId: number):Observable<any>{\r\n    const headers = new HttpHeaders()\r\n      .set('x-access-token',sessionStorage.getItem('token')||'');\r\n    return this.cacheResponse$ = this.http.get(`${this.baseUrl}/inventario/client/${clientId}`,{headers});\r\n\r\n  }\r\n\r\n\r\n  postInventario(body):Observable<any>{\r\n    const headers = new HttpHeaders()\r\n      .set('x-access-token',sessionStorage.getItem('token')||'');\r\n    return this.http.post(`${this.baseUrl}/inventario`,body,{headers});\r\n  }\r\n\r\n  patchInventario(body,id):Observable<any>{\r\n    const headers = new HttpHeaders()\r\n      .set('x-access-token',sessionStorage.getItem('token')||'');\r\n    return this.http.patch(`${this.baseUrl}/inventario/${id}`,body,{headers});\r\n  }\r\n}\r\n","import { Injectable, Output ,EventEmitter} from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\n\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { environment } from '../../../environments/environment';\r\nimport { Prestamo, PrestamoResponse } from 'src/app/interfaces/prestamo';\r\nimport { shareReplay } from 'rxjs/operators';\r\nimport { Client } from 'src/app/interfaces/client';\r\nimport { Inventario } from 'src/app/interfaces/inventario';\r\n\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PrestamoService {\r\n\r\n  @Output() prestamo:EventEmitter<Prestamo> = new EventEmitter();\r\n  @Output() client:EventEmitter<Client> = new EventEmitter();\r\n  @Output() inventario:EventEmitter<Inventario[]> = new EventEmitter();\r\n  @Output() response:EventEmitter<PrestamoResponse> = new EventEmitter();\r\n  cacheResponse$: Observable<any>;\r\n  private baseUrl: string = environment.baseUrl;\r\n\r\n  constructor( private http: HttpClient ) { }\r\n\r\n  getPrestamos({\r\n    clientCi = '',\r\n    estadoPrestamo = '',\r\n    page = 1,\r\n    force = false\r\n  }):Observable<any>{\r\n    const headers = new HttpHeaders()\r\n      .set('x-access-token',sessionStorage.getItem('token')||'');\r\n    if (force || !this.cacheResponse$) {\r\n      return this.cacheResponse$ = this.http\r\n        .get(`${this.baseUrl}/prestamo?clientCi=${clientCi}&estadoPrestamo=${estadoPrestamo}&page=${page}`,{headers})\r\n        .pipe( shareReplay(1));\r\n    }\r\n    return this.cacheResponse$;\r\n  }\r\n\r\n  getPrestamoByClientId(clientId: number):Observable<any>{\r\n    const headers = new HttpHeaders()\r\n      .set('x-access-token',sessionStorage.getItem('token')||'');\r\n    return this.http.get(`${this.baseUrl}/prestamo/client/${clientId}`,{headers});\r\n  }\r\n\r\n  getPrestamoById(id: number):Observable<any>{\r\n    const headers = new HttpHeaders()\r\n      .set('x-access-token',sessionStorage.getItem('token')||'');\r\n    return this.http.get(`${this.baseUrl}/prestamo/${id}`,{headers});\r\n  }\r\n\r\n  postPrestamo(body):Observable<any>{\r\n    const headers = new HttpHeaders()\r\n      .set('x-access-token',sessionStorage.getItem('token')||'');\r\n    return this.http.post(`${this.baseUrl}/prestamo`,body,{headers});\r\n  }\r\n\r\n  patchPrestamo(body,id):Observable<any>{\r\n    const headers = new HttpHeaders()\r\n      .set('x-access-token',sessionStorage.getItem('token')||'');\r\n    return this.http.patch(`${this.baseUrl}/prestamo/${id}`,body,{headers});\r\n  }\r\n}\r\n"]}